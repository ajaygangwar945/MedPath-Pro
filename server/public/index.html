<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>MedPath Pro | Smart Dijkstra Pathfinding</title>
    <link rel="stylesheet" href="landing.css">
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@300;400;600;800&display=swap" rel="stylesheet">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0/css/all.min.css">
    <!-- Three.js for Landing Page Animation -->
    <script src="https://cdnjs.cloudflare.com/ajax/libs/three.js/r128/three.min.js"></script>
</head>

<body>
    <!-- PRELOADER: Premium loading experience -->
    <div id="preloader">
        <div class="preloader-content">
            <svg class="med-logo loader-logo" viewBox="0 0 100 100" width="80" height="80">
                <circle cx="50" cy="50" r="45" fill="none" stroke="currentColor" stroke-width="8" />
                <rect x="45" y="25" width="10" height="50" fill="currentColor" rx="2" />
                <rect x="25" y="45" width="50" height="10" fill="currentColor" rx="2" />
                <circle cx="50" cy="50" r="5" fill="white" />
            </svg>
            <div class="loader-track">
                <div class="loader-fill"></div>
            </div>
            <p class="loader-text">Initializing MedPath Pro...</p>
        </div>
    </div>

    <!-- 3D Background Container -->
    <div id="landing-bg-canvas"></div>

    <div class="glow-bg"></div>

    <nav class="navbar">
        <div class="container">
            <div class="logo">
                <i class="fas fa-hand-holding-medical"></i>
                <span>MedPath Pro</span>
            </div>
            <div class="nav-actions">
                <button id="themeToggle" class="theme-toggle" title="Toggle Theme">
                    <i class="fas fa-moon"></i>
                </button>
                <a href="app.html" class="nav-btn">Open App</a>
            </div>
        </div>
    </nav>

    <main>
        <!-- Hero Section -->
        <section class="hero">
            <div class="container">
                <div class="hero-content">
                    <h1 class="reveal-text">Navigating <span>Healthcare</span> with Precision.</h1>
                    <p class="reveal-text delay-1">Optimizing hospital routes using advanced Dijkstra pathfinding
                        algorithms. Fast, reliable, and life-saving.</p>
                    <div class="hero-btns reveal-text delay-2">
                        <a href="app.html" class="cta-btn primary">Start Visualizing <i
                                class="fas fa-arrow-right"></i></a>
                        <a href="#features" class="cta-btn secondary">Learn More</a>
                    </div>
                </div>
                <div class="hero-image reveal-image">
                    <div class="image-wrapper">
                        <img src="assets/penguin-medic.jpg" alt="Penguin Medic" class="penguin-img">
                        <div class="image-glow"></div>
                    </div>
                </div>
            </div>
        </section>

        <!-- Features Section -->
        <section id="features" class="features">
            <div class="container">
                <div class="section-header">
                    <h2>Engineered for <span>Efficiency</span></h2>
                    <p>Real-world hospital logistics meet mathematical perfection.</p>
                </div>

                <div class="feature-grid">
                    <div class="feature-card hospital-scene-card">
                        <img src="assets/hospital-scene.jpg" alt="Hospital Scene" class="scene-img">
                        <div class="card-overlay">
                            <h3>Optimized Care</h3>
                            <p>Reducing transit time for patients and staff through algorithmic precision.</p>
                        </div>
                    </div>

                    <div class="info-content">
                        <div class="info-item">
                            <div class="info-icon"><i class="fas fa-route"></i></div>
                            <div class="info-text">
                                <h3>Dijkstra's Implementation</h3>
                                <p>Our custom-tuned algorithm calculates the shortest path between user nodes and
                                    hospital hubs in milliseconds.</p>
                            </div>
                        </div>
                        <div class="info-item">
                            <div class="info-icon"><i class="fas fa-shield-virus"></i></div>
                            <div class="info-text">
                                <h3>Reliable Data</h3>
                                <p>Integrated with secure MongoDB storage to maintain hospital and patient records
                                    efficiently.</p>
                            </div>
                        </div>
                        <div class="info-item">
                            <div class="info-icon"><i class="fas fa-bolt"></i></div>
                            <div class="info-text">
                                <h3>Instant Visualization</h3>
                                <p>Interactive 3D-inspired interface that brings complexity to life with engaging
                                    visuals.</p>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </section>

        <!-- CTA Section -->
        <section class="final-cta">
            <div class="container">
                <div class="cta-card">
                    <h2>Ready to explore the <span>shortest path</span>?</h2>
                    <p>Experience the power of MedPath Pro's visualizing engine today.</p>
                    <a href="app.html" class="cta-btn primary large">Launch Visualizer <i class="fas fa-rocket"></i></a>
                </div>
            </div>
        </section>
    </main>

    <footer class="footer">
        <div class="container">
            <p>&copy; 2026 MedPath Pro. Powered by Dijkstra Algorithm.</p>
        </div>
    </footer>

    <script>
        // --- THEME MANAGEMENT ---
        const themeToggle = document.getElementById('themeToggle');
        let isDarkMode = !document.body.classList.contains('light-theme');

        function initTheme() {
            const savedTheme = localStorage.getItem('medpath-theme');
            if (savedTheme === 'light') {
                document.body.classList.add('light-theme');
                isDarkMode = false;
                themeToggle.innerHTML = '<i class="fas fa-sun"></i>';
            } else {
                document.body.classList.remove('light-theme');
                isDarkMode = true;
                themeToggle.innerHTML = '<i class="fas fa-moon"></i>';
            }
        }

        themeToggle.addEventListener('click', () => {
            document.body.classList.toggle('light-theme');
            isDarkMode = !document.body.classList.contains('light-theme');
            themeToggle.innerHTML = isDarkMode ? '<i class="fas fa-moon"></i>' : '<i class="fas fa-sun"></i>';
            localStorage.setItem('medpath-theme', isDarkMode ? 'dark' : 'light');

            // Update background animation if it exists
            updateBackgroundTheme();
        });

        initTheme();

        // Simple scroll reveal
        const reveals = document.querySelectorAll('.reveal-text, .reveal-image');

        window.addEventListener('scroll', () => {
            reveals.forEach(el => {
                const windowHeight = window.innerHeight;
                const revealTop = el.getBoundingClientRect().top;
                const revealPoint = 150;

                if (revealTop < windowHeight - revealPoint) {
                    el.classList.add('active');
                }
            });
        });

        // Trigger hero reveal immediately
        window.addEventListener('load', () => {
            const preloader = document.getElementById('preloader');
            if (preloader) {
                setTimeout(() => {
                    preloader.classList.add('loaded');
                    setTimeout(() => {
                        preloader.remove();
                    }, 800);
                }, 1500);
            }

            document.querySelectorAll('.hero .reveal-text, .hero .reveal-image').forEach(el => {
                el.classList.add('active');
            });

            // Initialize Background Animation
            initLandingAnimation();
        });

        function initLandingAnimation() {
            const container = document.getElementById('landing-bg-canvas');
            if (!container || !window.THREE) return;

            const scene = new THREE.Scene();
            const camera = new THREE.PerspectiveCamera(75, window.innerWidth / window.innerHeight, 0.1, 1000);
            const renderer = new THREE.WebGLRenderer({ alpha: true, antialias: true });

            renderer.setSize(window.innerWidth, window.innerHeight);
            container.appendChild(renderer.domElement);

            // --- BOKEH CONFIG ---
            const orbCount = 45;
            const positions = new Float32Array(orbCount * 3);
            const velocities = new Float32Array(orbCount * 3);
            const sizes = new Float32Array(orbCount);

            const geometry = new THREE.BufferGeometry();

            for (let i = 0; i < orbCount; i++) {
                // Initial positions in a wider spread
                positions[i * 3] = (Math.random() - 0.5) * 20;
                positions[i * 3 + 1] = (Math.random() - 0.5) * 15;
                positions[i * 3 + 2] = (Math.random() - 0.5) * 10;

                // Very slow drift velocities
                velocities[i * 3] = (Math.random() - 0.5) * 0.005;
                velocities[i * 3 + 1] = (Math.random() - 0.5) * 0.005;
                velocities[i * 3 + 2] = (Math.random() - 0.5) * 0.005;

                // Varying sizes for bokeh depth
                sizes[i] = Math.random() * 2 + 0.5;
            }

            geometry.setAttribute('position', new THREE.BufferAttribute(positions, 3));
            geometry.setAttribute('size', new THREE.BufferAttribute(sizes, 1));

            // Custom Shader for Soft Glow Circles
            const material = new THREE.ShaderMaterial({
                uniforms: {
                    color: { value: new THREE.Color(isDarkMode ? 0x22d3ee : 0x0891b2) },
                    opacity: { value: isDarkMode ? 0.35 : 0.25 }
                },
                vertexShader: `
                    attribute float size;
                    void main() {
                        vec4 mvPosition = modelViewMatrix * vec4( position, 1.0 );
                        gl_PointSize = size * ( 300.0 / - mvPosition.z );
                        gl_Position = projectionMatrix * mvPosition;
                    }
                `,
                fragmentShader: `
                    uniform vec3 color;
                    uniform float opacity;
                    void main() {
                        float dist = length( gl_PointCoord - vec2( 0.5, 0.5 ) );
                        float alpha = smoothstep(0.5, 0.1, dist);
                        if ( alpha < 0.01 ) discard;
                        gl_FragColor = vec4( color, opacity * alpha );
                    }
                `,
                transparent: true,
                depthWrite: false
            });

            const orbs = new THREE.Points(geometry, material);
            scene.add(orbs);

            window.activeParticlesMesh = orbs;

            camera.position.z = 8;

            let mouseX = 0;
            let mouseY = 0;

            window.addEventListener('mousemove', (e) => {
                mouseX = (e.clientX - window.innerWidth / 2) / 50;
                mouseY = (e.clientY - window.innerHeight / 2) / 50;
            });

            function animate() {
                requestAnimationFrame(animate);

                const positions = orbs.geometry.attributes.position.array;

                for (let i = 0; i < orbCount; i++) {
                    // Constant slow drift
                    positions[i * 3] += velocities[i * 3];
                    positions[i * 3 + 1] += velocities[i * 3 + 1];
                    positions[i * 3 + 2] += velocities[i * 3 + 2];

                    // Gentle Mouse Repel Effect (Drift away)
                    const dx = positions[i * 3] - mouseX;
                    const dy = positions[i * 3 + 1] - (-mouseY);
                    const distSq = dx * dx + dy * dy;

                    if (distSq < 16) { // React within 4 units radius
                        const dist = Math.sqrt(distSq);
                        const force = (4 - dist) * 0.002;
                        positions[i * 3] += (dx / dist) * force;
                        positions[i * 3 + 1] += (dy / dist) * force;
                    }

                    // Bounds checking (wrap around softly)
                    if (Math.abs(positions[i * 3]) > 12) positions[i * 3] *= -0.95;
                    if (Math.abs(positions[i * 3 + 1]) > 9) positions[i * 3 + 1] *= -0.95;
                }

                orbs.geometry.attributes.position.needsUpdate = true;
                renderer.render(scene, camera);
            }

            animate();

            window.addEventListener('resize', () => {
                renderer.setSize(window.innerWidth, window.innerHeight);
                camera.aspect = window.innerWidth / window.innerHeight;
                camera.updateProjectionMatrix();
            });
        }

        function updateBackgroundTheme() {
            if (window.activeParticlesMesh) {
                const color = isDarkMode ? 0x22d3ee : 0x0891b2;
                const opacity = isDarkMode ? 0.35 : 0.25;
                window.activeParticlesMesh.material.uniforms.color.value.setHex(color);
                window.activeParticlesMesh.material.uniforms.opacity.value = opacity;
            }
        }
    </script>
</body>

</html>